const playPauseButton=document.getElementById("playPauseButton"),audio=document.getElementById("js-pokemon-modal-cry");playPauseButton.addEventListener("click",function(){audio.paused?(audio.play(),playPauseButton.classList.remove("play"),playPauseButton.classList.add("pause")):(audio.pause(),playPauseButton.classList.remove("pause"),playPauseButton.classList.add("play"))}),audio.addEventListener("ended",function(){playPauseButton.classList.remove("pause"),playPauseButton.classList.add("play")});const pokemonArea=document.getElementById("js-list-pokemon"),typeArea=document.getElementById("js-list-types"),typeAreaMobile=document.querySelector(".dropdown-select"),pokemonCounter=document.getElementById("js-count-pokemon"),typeAllButton=document.getElementById("special-button"),sectionAllInfoPokemon=document.querySelector(".s-all-info-pokemon"),btnLoadMore=document.getElementById("js-btn-load-more"),inputSearch=document.getElementById("js-input-search"),btnSearch=document.getElementById("js-btn-search"),pokemonModalImage=document.getElementById("js-pokemon-modal-image"),pokemonModalName=document.getElementById("js-pokemon-modal-name"),pokemonModalId=document.getElementById("js-pokemon-modal-id"),pokemonModalElement=document.getElementById("js-pokemon-modal-element"),pokemonModalIcon=document.getElementById("js-pokemon-modal-icon"),pokemonModalCry=document.getElementById("js-pokemon-modal-cry"),activeTypeNameMobile=document.getElementById("js-active-type-name-mobile"),removeDropdown=document.getElementById("js-remove-dropdown");let countPagination=0;const limit=151;typeAllButton.addEventListener("click",e=>filterByTypes(e));const parseNameBR=e=>dadosNomesPokemon[e]||!1,parseTypeBR=e=>{if(e[0].type)return dadosTiposPokemon[e[0].type.url.split("/")[6]].trim();e=e.split("/")[6];return dadosTiposPokemon[e]},capitalizeFirstLetter=e=>""+e.charAt(0).toUpperCase()+e.slice(1,e.length);function openDetailsPokemon(){document.documentElement.classList.add("open-modal");var e=this.getAttribute("idPoke");let t=this.querySelector(".thumb-img");var o=t.getAttribute("src");pokemonModalImage.setAttribute("src",o);o=this.querySelector("#namePoke");pokemonModalName.textContent=o.textContent;o=this.querySelector("#idPoke");pokemonModalId.textContent=o.textContent;o=this.classList[2];pokemonModalElement.setAttribute("typePokemonModal",o);let n=pokemonModalIcon.querySelector("img");n.setAttribute("src",`./img/icon-types/${o}.svg`);let a=this.querySelector(".icon"),s=a.querySelector("img");n.setAttribute("alt",s.getAttribute("alt")),pokemonModalCry.setAttribute("src",`https://raw.githubusercontent.com/PokeAPI/cries/main/cries/pokemon/latest/${e}.ogg`),axios({method:"GET",url:"https://pokeapi.co/api/v2/pokemon/"+e})}function closeDetailsPokemon(){document.documentElement.classList.remove("open-modal")}const createCardPokemon=e=>{var{name:t,id:o,sprite:n,spriteReserva:a,typeBR:s,type:e}=e;const i=document.createElement("button");i.classList="card-pokemon js-open-pokemon-details "+e,i.setAttribute("idPoke",o);const l=document.createElement("div");l.classList="image",i.appendChild(l);const c=document.createElement("img");c.className="thumb-img",n?c.setAttribute("src",n):c.setAttribute("src",a),l.appendChild(c);const r=document.createElement("div");r.classList="info";const d=document.createElement("div");d.classList="txt";const m=document.createElement("span");m.textContent=o<10?"#00"+o:o<100?"#0"+o:"#"+o;const p=document.createElement("h3");p.setAttribute("id","namePoke"),p.textContent=""+t,m.setAttribute("id","idPoke"),d.append(m,p),r.appendChild(d);const u=document.createElement("div");u.classList="icon";const y=document.createElement("img");y.setAttribute("src",`./img/icon-types/${e}.svg`),y.setAttribute("alt","Ícone "+s),u.appendChild(y),r.appendChild(u),i.appendChild(r),pokemonArea.appendChild(i)},createPokemonTypes=t=>{const{name:o,url:e,nameBR:n}=t,a=document.createElement("li"),s=Number(e.split("/")[6]);if(10001!==s&&10002!==s){const i=document.createElement("button");i.classList="type-filter "+o;const l=document.createElement("div");l.classList="icon",i.appendChild(l);const c=document.createElement("img");t=`./img/icon-types/${o}.svg`;c.setAttribute("src",t),c.setAttribute("alt",n),pokemonArea.appendChild(i),l.appendChild(c);const r=document.createElement("span");r.textContent=n,i.appendChild(l),i.appendChild(r),i.addEventListener("click",e=>filterByTypes(e,s)),a.appendChild(i),typeArea.appendChild(a);let e=document.createElement("li");const d=document.createElement("button");d.classList="type-filter "+o;const m=document.createElement("div");m.classList="icon";const p=document.createElement("img");p.setAttribute("src",t),p.setAttribute("alt",n),m.appendChild(p);const u=document.createElement("span");u.textContent=n,d.appendChild(m),d.appendChild(u),e.appendChild(d),typeAreaMobile.appendChild(e),e.addEventListener("click",e=>filterByTypes(e,s))}},listPokemon=async e=>{await axios({method:"GET",url:e}).then(e=>{const{count:t,results:o}=e.data;pokemonCounter.textContent=t,o.sort((e,t)=>e.id-t.id),o.forEach(l=>{var e=l.url;axios({method:"GET",url:e}).then(e=>{var{id:t,sprites:o,types:n}=e.data;let a=parseNameBR(t);a=a||capitalizeFirstLetter(l.name);e=parseTypeBR(n),e={name:a,id:t,sprite:o.other.dream_world.front_default,spriteReserva:o.front_default,type:n[0].type.name,typeBR:e};createCardPokemon(e);const s=document.querySelectorAll(".js-open-pokemon-details");s.forEach(e=>{e.addEventListener("click",openDetailsPokemon)});const i=document.querySelectorAll(".close-modal");i&&i.forEach(e=>{e.addEventListener("click",closeDetailsPokemon)})})})})},listPokemonTypes=async e=>{await axios({method:"GET",url:e}).then(e=>{const{count:t,results:o}=e.data;document.getElementById("js-count-types").textContent=t,o.forEach(e=>{var{name:t,url:o}=e,e={name:t,url:o,nameBR:parseTypeBR(e.url)};createPokemonTypes(e)})})},filterByTypes=async(e,t)=>{if(t)try{var o=sectionAllInfoPokemon.offsetTop;window.scrollTo({top:o+288,behavior:"smooth"});const n=document.querySelectorAll(".type-filter");n.forEach(e=>{e.classList.remove("active")}),e.currentTarget.classList.add("active"),activeTypeNameMobile.textContent=e.currentTarget.querySelector("span").textContent,removeDropdown.classList.remove("active"),pokemonArea.innerHTML="",btnLoadMore.style.display="none",axios({method:"GET",url:"https://pokeapi.co/api/v2/type/"+t}).then(e=>{const t=e.data["pokemon"];pokemonCounter.textContent=t.length,t.forEach(e=>{const l=e.pokemon["url"];axios({method:"GET",url:""+l}).then(e=>{var{id:t,sprites:o,types:n}=e.data;let a=parseNameBR(t);a=a||capitalizeFirstLetter(e.data.name);e=parseTypeBR(n),e={name:a,id:t,sprite:o.other.dream_world.front_default,spriteReserva:o.front_default,urlAPIDetails:l,type:n[0].type.name,typeBR:e};createCardPokemon(e);const s=document.querySelectorAll(".js-open-pokemon-details");s.forEach(e=>{e.addEventListener("click",openDetailsPokemon)});const i=document.querySelectorAll(".close-modal");i&&i.forEach(e=>{e.addEventListener("click",closeDetailsPokemon)})})})})}catch(e){console.error(e)}else{t=sectionAllInfoPokemon.offsetTop;window.scrollTo({top:t+288,behavior:"smooth"});const a=document.querySelectorAll(".type-filter");a.forEach(e=>{e.classList.remove("active")}),e.currentTarget.classList.add("active"),pokemonArea.innerHTML="",countPagination=0,btnLoadMore.style.display="block",listPokemon(`https://pokeapi.co/api/v2/pokemon/?limit=${limit}&offset=`+countPagination),countPagination++}};listPokemon(`https://pokeapi.co/api/v2/pokemon/?limit=${limit}&offset=`+countPagination),countPagination++,listPokemonTypes("https://pokeapi.co/api/v2/type/");const loadMorePokemon=()=>{var e=countPagination*limit;listPokemon(`https://pokeapi.co/api/v2/pokemon/?limit=${limit}&offset=`+e),countPagination++};btnLoadMore.addEventListener("click",loadMorePokemon);const searchPokemon=()=>{var e=inputSearch.value.toLowerCase();if(e){let r=e;for(var t in dadosNomesPokemon)if("ID"!==t)if(dadosNomesPokemon[t].toLowerCase().trim()===e){r=t;break}axios({method:"GET",url:"https://pokeapi.co/api/v2/pokemon/"+r}).then(e=>{const t=document.querySelectorAll(".type-filter");t.forEach(e=>{e.classList.remove("active")}),pokemonArea.innerHTML="",btnLoadMore.style.display="none",pokemonCounter.textContent=1;var{id:o,sprites:n,types:a}=e.data;let s=parseNameBR(o);s=s||capitalizeFirstLetter(pokemon.name);var i=parseTypeBR(a),e="https://pokeapi.co/api/v2/pokemon/"+r,i={name:s,id:o,sprite:n.other.dream_world.front_default,spriteReserva:n.front_default,urlAPIDetails:e,type:a[0].type.name,typeBR:i};createCardPokemon(i);const l=document.querySelectorAll(".js-open-pokemon-details");l.forEach(e=>{e.addEventListener("click",openDetailsPokemon)});const c=document.querySelectorAll(".close-modal");c&&c.forEach(e=>{e.addEventListener("click",closeDetailsPokemon)})}).catch(e=>{alert("Pokémon não encontrado.")})}else alert("Digite alguma coisa na busca."),pokemonArea.innerHTML="",countPagination=0,listPokemon(`https://pokeapi.co/api/v2/pokemon/?limit=${limit}&offset=`+countPagination),countPagination++,typeAllButton.classList.add("active"),btnLoadMore.style.display="block"};btnSearch.addEventListener("click",searchPokemon),inputSearch.addEventListener("keyup",e=>{"Enter"!==e.code&&"NumpadEnter"!==e.code||searchPokemon()});var slide_hero=new Swiper(".slide-hero",{effect:"fade",pagination:{el:".slide-hero .area-explore .swiper-pagination"}});const btnDropdownSelect=document.querySelector(".js-open-select-custom");btnDropdownSelect&&btnDropdownSelect.addEventListener("click",()=>{btnDropdownSelect.parentElement.classList.toggle("active")});