const playPauseButton=document.getElementById("playPauseButton"),audio=document.getElementById("pokemonCry");playPauseButton.addEventListener("click",function(){audio.paused?(audio.play(),playPauseButton.classList.remove("play"),playPauseButton.classList.add("pause")):(audio.pause(),playPauseButton.classList.remove("pause"),playPauseButton.classList.add("play"))}),audio.addEventListener("ended",function(){playPauseButton.classList.remove("pause"),playPauseButton.classList.add("play")});const pokemonArea=document.getElementById("js-list-pokemon"),typeArea=document.getElementById("js-list-types"),typeAreaMobile=document.querySelector(".dropdown-select"),pokemonCounter=document.getElementById("js-count-pokemon"),typeAllButton=document.getElementById("special-button"),sectionAllInfoPokemon=document.querySelector(".s-all-info-pokemon"),btnLoadMore=document.getElementById("js-btn-load-more"),inputSearch=document.getElementById("js-input-search"),btnSearch=document.getElementById("js-btn-search");let countPagination=0;const limit=151;typeAllButton.addEventListener("click",e=>filterByTypes(e));const parseNameBR=e=>dadosNomesPokemon[e]||!1,parseTypeBR=e=>{if(e[0].type)return dadosTiposPokemon[e[0].type.url.split("/")[6]];e=e.split("/")[6];return dadosTiposPokemon[e]},capitalizeFirstLetter=e=>""+e.charAt(0).toUpperCase()+e.slice(1,e.length);function openDetailsPokemon(){document.documentElement.classList.add("open-modal");var e=this.getAttribute("idpoke");axios({method:"GET",url:"https://pokeapi.co/api/v2/pokemon/"+e}).then(e=>{console.log(e.data)})}function closeDetailsPokemon(){document.documentElement.classList.remove("open-modal")}const createCardPokemon=e=>{var{name:t,id:o,sprite:n,spriteReserva:a,typeBR:s,type:e}=e;const i=document.createElement("button");i.classList="card-pokemon js-open-pokemon-details "+e,i.setAttribute("idpoke",o);const l=document.createElement("div");l.classList="image",i.appendChild(l);const c=document.createElement("img");c.className="thumb-img",n?c.setAttribute("src",n):c.setAttribute("src",a),l.appendChild(c);const r=document.createElement("div");r.classList="info";const p=document.createElement("div");p.classList="txt";const d=document.createElement("span");d.textContent=o<10?"#00"+o:o<100?"#0"+o:"#"+o;const m=document.createElement("h3");m.textContent=""+t,p.append(d,m),r.appendChild(p);const u=document.createElement("div");u.classList="icon";const y=document.createElement("img");y.setAttribute("src",`./img/icon-types/${e}.svg`),y.setAttribute("alt",s),u.appendChild(y),r.appendChild(u),i.appendChild(r),pokemonArea.appendChild(i)},createPokemonTypes=t=>{const{name:o,url:e,nameBR:n}=t,a=document.createElement("li"),s=Number(e.split("/")[6]);if(10001!==s&&10002!==s){const i=document.createElement("button");i.classList="type-filter "+o;const l=document.createElement("div");l.classList="icon",i.appendChild(l);const c=document.createElement("img");t=`./img/icon-types/${o}.svg`;c.setAttribute("src",t),c.setAttribute("alt",n),pokemonArea.appendChild(i),l.appendChild(c);const r=document.createElement("span");r.textContent=n,i.appendChild(l),i.appendChild(r),i.addEventListener("click",e=>filterByTypes(e,s)),a.appendChild(i),typeArea.appendChild(a);let e=document.createElement("li");const p=document.createElement("button");p.classList="type-filter "+o;const d=document.createElement("div");d.classList="icon";const m=document.createElement("img");m.setAttribute("src",t),m.setAttribute("alt",n),d.appendChild(m);const u=document.createElement("span");u.textContent=n,p.appendChild(d),p.appendChild(u),e.appendChild(p),typeAreaMobile.appendChild(e),e.addEventListener("click",e=>filterByTypes(e,s))}},listPokemon=async e=>{await axios({method:"GET",url:e}).then(e=>{const{count:t,results:o}=e.data;pokemonCounter.textContent=t,o.sort((e,t)=>e.id-t.id),o.forEach(c=>{var e=c.url;axios({method:"GET",url:e}).then(e=>{var{id:t,sprites:o,types:n,cries:a}=e.data;let s=parseNameBR(t);s=s||capitalizeFirstLetter(c.name);e=parseTypeBR(n),e={name:s,id:t,sprite:o.other.dream_world.front_default,spriteReserva:o.front_default,cry:a.latest,type:n[0].type.name,typeBR:e};createCardPokemon(e);const i=document.querySelectorAll(".js-open-pokemon-details");i.forEach(e=>{e.addEventListener("click",openDetailsPokemon)});const l=document.querySelectorAll(".close-modal");l&&l.forEach(e=>{e.addEventListener("click",closeDetailsPokemon)})})})})},listPokemonTypes=async e=>{await axios({method:"GET",url:e}).then(e=>{const{count:t,results:o}=e.data;document.getElementById("js-count-types").textContent=t,o.forEach(e=>{var{name:t,url:o}=e,e={name:t,url:o,nameBR:parseTypeBR(e.url)};createPokemonTypes(e)})})},filterByTypes=async(e,t)=>{if(t)try{var o=sectionAllInfoPokemon.offsetTop;window.scrollTo({top:o+288,behavior:"smooth"});const n=document.querySelectorAll(".type-filter");n.forEach(e=>{e.classList.remove("active")}),e.currentTarget.classList.add("active"),pokemonArea.innerHTML="",btnLoadMore.style.display="none",axios({method:"GET",url:"https://pokeapi.co/api/v2/type/"+t}).then(e=>{const t=e.data["pokemon"];pokemonCounter.textContent=t.length,t.forEach(e=>{const c=e.pokemon["url"];axios({method:"GET",url:""+c}).then(e=>{var{id:t,sprites:o,types:n,cries:a}=e.data;let s=parseNameBR(t);s=s||capitalizeFirstLetter(e.data.name);e=parseTypeBR(n),e={name:s,id:t,sprite:o.other.dream_world.front_default,spriteReserva:o.front_default,cry:a.latest,urlAPIDetails:c,type:n[0].type.name,typeBR:e};createCardPokemon(e);const i=document.querySelectorAll(".js-open-pokemon-details");i.forEach(e=>{e.addEventListener("click",openDetailsPokemon)});const l=document.querySelectorAll(".close-modal");l&&l.forEach(e=>{e.addEventListener("click",closeDetailsPokemon)})})})})}catch(e){console.error(e)}else{t=sectionAllInfoPokemon.offsetTop;window.scrollTo({top:t+288,behavior:"smooth"});const a=document.querySelectorAll(".type-filter");a.forEach(e=>{e.classList.remove("active")}),e.currentTarget.classList.add("active"),pokemonArea.innerHTML="",countPagination=0,btnLoadMore.style.display="block",listPokemon(`https://pokeapi.co/api/v2/pokemon/?limit=${limit}&offset=`+countPagination),countPagination++}};listPokemon(`https://pokeapi.co/api/v2/pokemon/?limit=${limit}&offset=`+countPagination),countPagination++,listPokemonTypes("https://pokeapi.co/api/v2/type/");const loadMorePokemon=()=>{var e=countPagination*limit;listPokemon(`https://pokeapi.co/api/v2/pokemon/?limit=${limit}&offset=`+e),countPagination++};btnLoadMore.addEventListener("click",loadMorePokemon);const searchPokemon=()=>{var e=inputSearch.value.toLowerCase();if(e){let p=e;for(var t in dadosNomesPokemon)if("ID"!==t)if(dadosNomesPokemon[t].toLowerCase().trim()===e){p=t;break}axios({method:"GET",url:"https://pokeapi.co/api/v2/pokemon/"+p}).then(e=>{const t=document.querySelectorAll(".type-filter");t.forEach(e=>{e.classList.remove("active")}),pokemonArea.innerHTML="",btnLoadMore.style.display="none",pokemonCounter.textContent=1;var{id:o,sprites:n,types:a,cries:s}=e.data;let i=parseNameBR(o);i=i||capitalizeFirstLetter(pokemon.name);var l=parseTypeBR(a),e="https://pokeapi.co/api/v2/pokemon/"+p,l={name:i,id:o,sprite:n.other.dream_world.front_default,spriteReserva:n.front_default,cry:s.latest,urlAPIDetails:e,type:a[0].type.name,typeBR:l};createCardPokemon(l);const c=document.querySelectorAll(".js-open-pokemon-details");c.forEach(e=>{e.addEventListener("click",openDetailsPokemon)});const r=document.querySelectorAll(".close-modal");r&&r.forEach(e=>{e.addEventListener("click",closeDetailsPokemon)})}).catch(e=>{alert("Pokémon não encontrado.")})}else alert("Digite alguma coisa na busca."),pokemonArea.innerHTML="",countPagination=0,listPokemon(`https://pokeapi.co/api/v2/pokemon/?limit=${limit}&offset=`+countPagination),countPagination++,typeAllButton.classList.add("active"),btnLoadMore.style.display="block"};btnSearch.addEventListener("click",searchPokemon),inputSearch.addEventListener("keyup",e=>{"Enter"!==e.code&&"NumpadEnter"!==e.code||searchPokemon()});var slide_hero=new Swiper(".slide-hero",{effect:"fade",pagination:{el:".slide-hero .area-explore .swiper-pagination"}});const btnDropdownSelect=document.querySelector(".js-open-select-custom");btnDropdownSelect&&btnDropdownSelect.addEventListener("click",()=>{btnDropdownSelect.parentElement.classList.toggle("active")});